{"version":3,"sources":["bundle.js"],"names":["require","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length",1,"module","./lib/priorityq",2,"PriorityQ","comp","this","items","prototype","push","item","splice","pop","shift","peek","size","clear","isEmpty","maze","Backtracker","width","height","grid","Uint8Array","queue","Array","undefined","test","c","get","set","v","fringe","reset","generate","stack","cc","cf","Math","floor","random","solve","start","end","pq","b","score","visited","Set","self","manhattan","abs","ci","path","add","JSON","stringify","fr","frstr","has","np","slice","toString","str","priorityjs"],"mappings":"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","file":"bundle.js","sourcesContent":["require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = require('./lib/priorityq');\r\n\n},{\"./lib/priorityq\":2}],2:[function(require,module,exports){\n\t'use strict';\r\n\r\n\tfunction PriorityQ(comp) {\r\n\t    if (!comp || comp.length != 2) {\r\n\t        throw 'a valid comparator function required';\r\n\t    }\r\n\t    this.comp = comp;\r\n\t    this.items = [];\r\n\t}\r\n\r\n\tPriorityQ.prototype.push = function(item) {\r\n\t    for (var i = 0; i < this.items.length; i++) {\r\n\t        if (this.comp(item, this.items[i])) {\r\n\t            this.items.splice(i, 0, item);\r\n\t            return;\r\n\t        }\r\n\t    }\r\n\t    this.items[i] = item;\r\n\t};\r\n\r\n\tPriorityQ.prototype.pop = function() {\r\n\t    return this.items.shift();\r\n\t};\r\n\r\n\tPriorityQ.prototype.peek = function() {\r\n\t    return this.items[0];\r\n\t};\r\n\r\n\tPriorityQ.prototype.size = function() {\r\n\t    return this.items.length;\r\n\t};\r\n\r\n\tPriorityQ.prototype.clear = function() {\r\n\t    this.items = [];\r\n\t};\r\n\r\n\tPriorityQ.prototype.isEmpty = function() {\r\n\t    return this.items.length === 0;\r\n\t};\r\n\r\n\tmodule.exports.PriorityQ = PriorityQ;\r\n\n},{}],\"maze\":[function(require,module,exports){\n'use strict';\r\n\r\nvar queue = require('priorityjs');\r\n\r\nfunction Backtracker(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.grid = new Uint8Array(width * height);\r\n}\r\n\r\nArray.prototype.peek = function() {\r\n    return this.length > 0 ? this[this.length - 1] : undefined;\r\n};\r\n\r\nBacktracker.prototype.test = function(r, c) {\r\n    return !(r <= 0 || r >= (this.height - 1) ||\r\n            c <= 0 || c >= (this.width - 1)) &&\r\n        !this.grid[r * this.width + c];\r\n};\r\n\r\nBacktracker.prototype.get = function(r, c) {\r\n    return this.grid[r * this.width + c];\r\n};\r\n\r\nBacktracker.prototype.set = function(r, c, v) {\r\n    this.grid[r * this.width + c] = v;\r\n};\r\n\r\nBacktracker.prototype.fringe = function(r, c) {\r\n    var items = [];\r\n    var f = [\r\n        [-2, 0],\r\n        [0, 2],\r\n        [2, 0],\r\n        [0, -2]\r\n    ];\r\n    for (var i = 0; i < f.length; i++) {\r\n        if (this.test(r + f[i][0], c + f[i][1])) {\r\n            items.push([r + f[i][0], c + f[i][1]]);\r\n        }\r\n    }\r\n    return items;\r\n};\r\n\r\nBacktracker.prototype.reset = function() {\r\n    var l = this.grid.length;\r\n    while (l) {\r\n        this.grid[--l] = 0;\r\n    }\r\n};\r\n\r\nBacktracker.prototype.generate = function() {\r\n    var stack = [];\r\n    var cc = [1, 1];\r\n    while (cc) {\r\n        this.set(cc[0], cc[1], 1);\r\n        var f = this.fringe(cc[0], cc[1]);\r\n        if (f.length > 0) {\r\n            var cf = f[Math.floor(Math.random() * f.length)];\r\n            stack.push(cc);\r\n            this.set(Math.floor((cc[0] + cf[0]) / 2),\r\n                Math.floor((cc[1] + cf[1]) / 2), 1);\r\n            cc = cf;\r\n        } else {\r\n            cc = stack.pop();\r\n        }\r\n    }\r\n};\r\n\r\nBacktracker.prototype.solve = function(start, end) {\r\n    var pq = new queue.PriorityQ(function(a, b) {\r\n        return a.score < b.score;\r\n    });\r\n    var visited = new Set();\r\n    var self = this;\r\n\r\n    var manhattan = function(a, b) {\r\n        return Math.abs(a[0] - b[0]) + Math.abs(a[1] - b[1]);\r\n    };\r\n\r\n    var test = function(r, c) {\r\n        return !(r <= 0 || r >= (self.height - 1) ||\r\n                c <= 0 || c >= (self.width - 1)) &&\r\n            self.grid[r * self.width + c];\r\n    };\r\n\r\n    var fringe = function(r, c) {\r\n        var items = [];\r\n        var f = [\r\n            [-1, 0],\r\n            [0, 1],\r\n            [1, 0],\r\n            [0, -1]\r\n        ];\r\n        for (var i = 0; i < f.length; i++) {\r\n            if (test(r + f[i][0], c + f[i][1])) {\r\n                items.push([r + f[i][0], c + f[i][1]]);\r\n            }\r\n        }\r\n        return items;\r\n    };\r\n\r\n    var ci = {\r\n        path: [start],\r\n        score: manhattan(start, end)\r\n    };\r\n    visited.add(JSON.stringify(ci.path.peek()));\r\n    while (ci && manhattan(ci.path.peek(), end) !== 0) {\r\n        var fr = fringe(ci.path.peek()[0], ci.path.peek()[1]);\r\n        for (var i = 0; i < fr.length; i++) {\r\n            var frstr = JSON.stringify(fr[i]);\r\n            if (!visited.has(frstr)) {\r\n                visited.add(frstr);\r\n                var np = ci.path.slice(0);\r\n                np.push(fr[i]);\r\n                pq.push({\r\n                    path: np,\r\n                    score: ci.score + manhattan(fr[i], end)\r\n                });\r\n            }\r\n        }\r\n        ci = pq.pop();\r\n    }\r\n    return ci ? ci.path : [];\r\n};\r\n\r\nBacktracker.prototype.toString = function() {\r\n    var str = '';\r\n    for (var r = 0; r < this.height; r++) {\r\n        str += '\\n';\r\n        for (var c = 0; c < this.width; c++) {\r\n            str += this.grid[r * this.width + c] ? ' ' : 'â–ˆ';\r\n        }\r\n    }\r\n    return str;\r\n};\r\n\r\nmodule.exports.Backtracker = Backtracker;\r\n\n},{\"priorityjs\":1}]},{},[\"maze\"]);\n"],"sourceRoot":"/source/"}